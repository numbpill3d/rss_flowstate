<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro RSS Aggregator</title>
    <link rel="stylesheet" href="styles.css">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob:; img-src 'self' data: https:; connect-src 'self' https: http:;">
</head>
<body class="theme-win98">
    <div class="app-container">
        <!-- Header/Toolbar -->
        <div class="toolbar">
            <div class="toolbar-group">
                <button class="toolbar-btn" id="btn-new-feed" title="Add New Feed">
                    <span class="btn-icon">+</span>
                    <span class="btn-text">New Feed</span>
                </button>
                <button class="toolbar-btn" id="btn-refresh" title="Refresh All Feeds">
                    <span class="btn-icon">↻</span>
                    <span class="btn-text">Refresh</span>
                </button>
                <div class="toolbar-separator"></div>
                <button class="toolbar-btn" id="btn-new-group" title="Create New Group">
                    <span class="btn-icon">□</span>
                    <span class="btn-text">New Group</span>
                </button>
                <button class="toolbar-btn" id="btn-import" title="Import OPML">
                    <span class="btn-icon">↑</span>
                    <span class="btn-text">Import</span>
                </button>
                <button class="toolbar-btn" id="btn-export" title="Export OPML">
                    <span class="btn-icon">↓</span>
                    <span class="btn-text">Export</span>
                </button>
            </div>
            <div class="toolbar-group">
                <label for="theme-selector" style="font-size: 11px; margin-right: 4px;">Theme:</label>
                <select class="theme-selector" id="theme-selector">
                    <option value="win98">Windows 98</option>
                    <option value="win95">Windows 95</option>
                    <option value="green">Classic Green</option>
                    <option value="amber">Amber Terminal</option>
                </select>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-layout">
            <!-- Sidebar -->
            <div class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h3>Feed Groups</h3>
                    <button class="sidebar-toggle" id="sidebar-toggle" title="Toggle Sidebar">◀</button>
                </div>
                
                <div class="feed-tree" id="feed-tree">
                    <!-- Feed groups will be dynamically generated here -->
                </div>

                <!-- Sidebar Status -->
                <div class="sidebar-status">
                    <div class="status-info">
                        <div class="status-line">
                            <span class="status-label">Total Feeds:</span>
                            <span class="status-value" id="total-feeds">0</span>
                        </div>
                        <div class="status-line">
                            <span class="status-label">Unread Items:</span>
                            <span class="status-value" id="total-unread">0</span>
                        </div>
                        <div class="status-line">
                            <span class="status-label">Last Update:</span>
                            <span class="status-value" id="last-update">Never</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Tab Bar -->
                <div class="tab-bar" id="tab-bar">
                    <div class="tab active" data-tab="articles">
                        <span class="tab-text">Articles</span>
                        <button class="tab-close" style="display: none;">×</button>
                    </div>
                    <div class="tab" data-tab="feed-settings">
                        <span class="tab-text">Feed Settings</span>
                        <button class="tab-close" style="display: none;">×</button>
                    </div>
                    <button class="new-tab-btn" id="new-tab-btn" title="New Tab">+</button>
                </div>

                <!-- Tab Panels -->
                <div class="tab-panels">
                    <!-- Articles Panel -->
                    <div class="tab-panel active" id="panel-articles">
                        <div class="articles-layout">
                            <!-- Article List -->
                            <div class="article-list">
                                <div class="list-header">
                                    <div class="list-controls">
                                        <button class="list-btn" id="mark-all-read" title="Mark All Articles as Read">Mark All Read</button>
                                        <button class="list-btn" id="show-unread" title="Show Only Unread Articles">Unread Only</button>
                                        <button class="list-btn" id="show-all" title="Show All Articles">Show All</button>
                                        <input type="text" class="search-box" placeholder="Search articles..." id="search-articles">
                                    </div>
                                </div>
                                
                                <div class="articles-container" id="articles-container">
                                    <!-- Articles will be dynamically generated here -->
                                    <div class="no-articles">
                                        <div class="no-articles-icon">📰</div>
                                        <p>No articles to display</p>
                                        <p>Add some RSS feeds to get started!</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Article Reader -->
                            <div class="article-reader" id="article-reader">
                                <div class="reader-header">
                                    <h2 class="reader-title">Select an article to read</h2>
                                    <div class="reader-controls">
                                        <button class="reader-btn" id="open-original" title="Open Original Article">Open Original</button>
                                        <button class="reader-btn" id="mark-read" title="Toggle Read Status">Mark Read</button>
                                        <button class="reader-btn" id="save-article" title="Save Article">Save</button>
                                        <button class="reader-btn" id="copy-link" title="Copy Article Link">Copy Link</button>
                                    </div>
                                </div>
                                <div class="reader-content">
                                    <div class="reader-placeholder">
                                        <div class="placeholder-icon">📖</div>
                                        <h3>Welcome to Retro RSS Aggregator!</h3>
                                        <p>Select an article from the list to start reading.</p>
                                        <div class="placeholder-help">
                                            <h4>Quick Start Guide:</h4>
                                            <ul>
                                                <li>• Click "New Feed" to add RSS feeds</li>
                                                <li>• Organize feeds into custom groups</li>
                                                <li>• Use Ctrl+N for new feeds, F5 to refresh</li>
                                                <li>• Switch themes from the dropdown menu</li>
                                                <li>• Import/export OPML files for backup</li>
                                                <li>• Use Ctrl+B to toggle the sidebar</li>
                                            </ul>
                                        </div>
                                        <div class="placeholder-features">
                                            <h4>Features:</h4>
                                            <div class="feature-grid">
                                                <div class="feature-item">
                                                    <strong>RSS Parsing</strong>
                                                    <span>Full RSS 2.0 and Atom support</span>
                                                </div>
                                                <div class="feature-item">
                                                    <strong>Retro Themes</strong>
                                                    <span>Multiple vintage color schemes</span>
                                                </div>
                                                <div class="feature-item">
                                                    <strong>Organization</strong>
                                                    <span>Group feeds by category</span>
                                                </div>
                                                <div class="feature-item">
                                                    <strong>Search</strong>
                                                    <span>Find articles quickly</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Feed Settings Panel -->
                    <div class="tab-panel" id="panel-feed-settings">
                        <div class="settings-container">
                            <h2>Feed Management</h2>
                            
                            <div class="settings-section">
                                <h3>Add New RSS Feed</h3>
                                <div class="form-group">
                                    <label for="feed-url">RSS Feed URL:</label>
                                    <input type="url" id="feed-url" placeholder="https://example.com/rss.xml" class="text-input">
                                    <small class="form-help">Enter the full URL to an RSS or Atom feed</small>
                                </div>
                                <div class="form-group">
                                    <label for="feed-name">Custom Feed Name (optional):</label>
                                    <input type="text" id="feed-name" placeholder="My Favorite Blog" class="text-input">
                                    <small class="form-help">Leave blank to use the feed's default name</small>
                                </div>
                                <div class="form-group">
                                    <label for="feed-group">Assign to Group:</label>
                                    <select id="feed-group" class="select-input">
                                        <option value="all">All Feeds</option>
                                    </select>
                                </div>
                                <div class="form-actions">
                                    <button class="settings-btn primary" id="add-feed-btn">Add Feed</button>
                                    <button class="settings-btn" id="test-feed-btn">Test Feed</button>
                                </div>
                            </div>

                            <div class="settings-section">
                                <h3>Create New Group</h3>
                                <div class="form-group">
                                    <label for="new-group">Group Name:</label>
                                    <input type="text" id="new-group" placeholder="Technology, News, Entertainment..." class="text-input">
                                    <small class="form-help">Create custom groups to organize your feeds</small>
                                </div>
                                <div class="form-actions">
                                    <button class="settings-btn" id="create-group-btn">Create Group</button>
                                </div>
                            </div>

                            <div class="settings-section">
                                <h3>Import/Export Feeds</h3>
                                <div class="import-export">
                                    <div class="import-export-item">
                                        <button class="settings-btn" id="import-opml">Import OPML File</button>
                                        <small>Import feeds from other RSS readers</small>
                                    </div>
                                    <div class="import-export-item">
                                        <button class="settings-btn" id="export-opml">Export OPML File</button>
                                        <small>Backup your feeds to a file</small>
                                    </div>
                                </div>
                            </div>

                            <div class="settings-section">
                                <h3>Application Settings</h3>
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="auto-refresh" checked>
                                        Auto-refresh feeds every 30 minutes
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="mark-read-on-view" checked>
                                        Mark articles as read when viewed
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label for="max-articles">Maximum articles per feed:</label>
                                    <select id="max-articles" class="select-input">
                                        <option value="50">50 articles</option>
                                        <option value="100" selected>100 articles</option>
                                        <option value="200">200 articles</option>
                                        <option value="500">500 articles</option>
                                    </select>
                                </div>
                            </div>

                            <div class="settings-section">
                                <h3>Manage Existing Feeds</h3>
                                <div class="feed-management" id="feed-management">
                                    <!-- Feed management items will be dynamically generated here -->
                                    <div class="no-feeds">
                                        <p>No feeds added yet. Add your first feed above!</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-section">
                <span id="status-text">Ready</span>
            </div>
            <div class="status-section">
                <span id="connection-status">●</span>
                <span id="feed-status">No feeds</span>
            </div>
            <div class="status-section">
                <span id="memory-usage">Memory: --MB</span>
                <span id="app-version">v1.0.0</span>
            </div>
        </div>
    </div>

    <!-- Modal Dialogs -->
    <div class="modal-overlay" id="modal-overlay" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3 id="modal-title">Dialog</h3>
                <button class="modal-close" id="modal-close">×</button>
            </div>
            <div class="modal-body" id="modal-body">
                <p>Modal content goes here.</p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn primary" id="modal-ok">OK</button>
                <button class="modal-btn" id="modal-cancel">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay" style="display: none;">
        <div class="loading-dialog">
            <div class="loading-content">
                <div class="loading-spinner">⟳</div>
                <h3 id="loading-title">Loading...</h3>
                <p id="loading-message">Please wait while we process your request.</p>
                <div class="loading-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="context-menu" style="display: none;">
        <div class="context-menu-item" data-action="mark-read">Mark as Read</div>
        <div class="context-menu-item" data-action="mark-unread">Mark as Unread</div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" data-action="save-article">Save Article</div>
        <div class="context-menu-item" data-action="copy-link">Copy Link</div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" data-action="open-original">Open Original</div>
    </div>

    <script src="app.js"></script>
</body>
</html>
